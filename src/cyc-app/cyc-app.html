<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../cyc-editor-window/cyc-editor-window.html">
<link rel="import" href="../cyc-theme-editor/cyc-theme-editor.html">

<dom-module id="cyc-app">
  <template>
    <link rel="stylesheet" href="cyc-app.css" inline>

    <iron-ajax
      auto
      url="[[themeFile]]"
      handle-as="json"
      last-response="{{_theme}}"></iron-ajax>

    <div class="preview">
      <h1 class="site-title" role="text">
        <svg aria-hidden="true" viewBox="0 0 160 160" class="site-title__logo" fill="#fff">
          <g>
            <path d="M 3 115 L 112 6 L 148 21 L 16 120 L 3 115 Z"></path>
            <path d="M 112 6 L 148 21 L 150 136 L 112 152 L 112 6 Z"></path>
            <path d="M 148 135 L 112 152 L 3 43 L 17 37 L 148 135 Z"></path>
          </g>
        </svg>

        <span>Color your Code</span>
      </h1>

      <cyc-editor-window highlight="[[_highlightSection]]"></cyc-editor-window>
    </div>

    <cyc-theme-editor class="panel" theme="[[_theme]]" on-color-hover="_setHighlight"></cyc-theme-editor>
  </template>

  <script>
    /**
     * CYC App
     * @polymer
     * @customElement
     */
    class CycApp extends Polymer.Element {
      static get is() {
        return 'cyc-app';
      }

      static get properties() {
        return {
          // Name of the file to be used as base theme.
          themeFile: {
            type: String,
            value: 'electron-color-theme.json',
          },
          _highlightSection: {
            type: String,
          },
        };
      }

      ready() {
        super.ready();
        this.dispatchEvent(new CustomEvent('shell-loaded', {
          bubbles: true,
          composed: true,
        }));
      }

      _setHighlight(e) {
        this._highlightSection = e.detail;
      }
    }

    window.customElements.define(CycApp.is, CycApp);
  </script>
</dom-module>
